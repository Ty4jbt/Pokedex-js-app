let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=150";function n(e){$(".modal-header");let t=$(".modal-title"),n=$(".modal-body"),o=$("#pokemon-id");t.empty(),n.empty(),o.empty();let i=document.createElement("p");i.innerText="ID: "+e.id;let r=document.createElement("img");r.setAttribute("src",e.imageUrl),r.classList.add("img-fluid","mb-2","pokepic");let a=document.createElement("p");a.innerText="Height: "+e.height/10+" m";let l=document.createElement("p");l.innerText="Weight: "+e.weight/10+" kg",t.append(e.name),n.append(i),n.append(r),n.append(a),n.append(l),e.types.forEach(function(e){let t=document.createElement("img");var o;t.classList.add("type"),t.setAttribute("src",`/img/${(o=e.type.name).charAt(0).toUpperCase()+o.substr(1)}.svg`),n.append(t)})}function o(e){r(e).then(function(){n(e)})}function i(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("Pokemon is not correct")}function r(e){let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){e.id=t.id,e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types}).catch(function(e){console.error(e)})}return{getAll:function(){return e},add:i,addListItem:function(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("button");n.innerText=e.name,n.classList.add("btn","btn-primary","list-group-item","text-capitalize"),n.setAttribute("type","button"),n.setAttribute("data-target","#pokemon-info"),n.setAttribute("data-toggle","modal"),n.setAttribute("data-bs-name","pokemon.name"),t.appendChild(n),n.addEventListener("click",function(t){t.preventDefault(),o(e)})},showDetails:o,loadList:function(){return fetch(t).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){i({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:r,showModal:n}}();function searchPokemon(){let e=document.querySelector("#pokemon-search").value.toLowerCase(),t=document.querySelectorAll(".list-group-item");for(let n=0;n<t.length;n++){t[n].innerText.toLowerCase().indexOf(e)>-1?t[n].style.display="":t[n].style.display="none"}}pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});